{"filter":false,"title":"observer.js","tooltip":"/site/js/utils/observer.js","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":30,"column":1},"action":"insert","lines":["import Map from 'es6-map';","","export default ( Observer, options ) => {","    var observer = new Observer( entries => entries.forEach( handle ), options )","    var callbacks = new Map();","    var handle = entry => {","        var cbs = callbacks.get( entry.target );","        if ( cbs ) cbs.forEach( cb => cb( entry ) );","    }","    var observe = ( el, cb ) => {","        if ( callbacks.has( el ) ) {","            callbacks.set( el, [ ...callbacks.get( el ), cb ] );","        } else {","            callbacks.set( el, [ cb ] );","            observer.observe( el );","        }","    }","    var unobserve = ( el, cb ) => {","        var cbs = callbacks.get( el );","        if ( cbs ) {","            cbs = cbs.filter( x => x !== cb );","            if ( cbs.length ) {","                callbacks.set( el, cbs );","            } else {","                callbacks.delete( el );","                observer.unobserve( el );","            }","        }","    }","    return { observe, unobserve };","}"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":2,"column":0},"action":"remove","lines":["import Map from 'es6-map';","",""],"id":2}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":5,"column":52},"end":{"row":5,"column":52},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1564147952489,"hash":"7dd49784b6572a67acf2cc10426b7541e0d686cd"}